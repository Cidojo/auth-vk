!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e){function n(t,e,n){var o,r,i,a,u;function s(){var c=Date.now()-a;c<e&&c>=0?o=setTimeout(s,e-c):(o=null,n||(u=t.apply(i,r),i=r=null))}null==e&&(e=100);var c=function(){i=this,r=arguments,a=Date.now();var c=n&&!o;return o||(o=setTimeout(s,e)),c&&(u=t.apply(i,r),i=r=null),u};return c.clear=function(){o&&(clearTimeout(o),o=null)},c.flush=function(){o&&(u=t.apply(i,r),i=r=null,clearTimeout(o),o=null)},c}n.debounce=n,t.exports=n},function(t,e,n){},function(t,e){t.exports=[{title:"Main",path:"main",pathToFile:"main.pug"}]},function(t,e,n){"use strict";n.r(e);n(1);var o=n(0),r=n.n(o);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach(function(e){s(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c=7351903,l=500,d={CONNECTED:"connected",NOT_AUTHORIZED:"not_authorized",UNKNOWN:"unknown"},f={FRIENDS_SEARCH:{user_id:"",count:1e3,fields:"id, lists, domain, photo_50",q:"",v:5.103},USER_DATA:{user_ids:"",fields:"photo_max",v:5.103},FRIENDS_GET:{user_id:"",order:"number",fields:"id, lists, domain, photo_50",count:"5000",v:5.103}},p=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,"_api",window.VK),s(this,"login",function(t){t.preventDefault(),n._api.Auth.login(n.handleLogin,n._api.access.FRIENDS)}),s(this,"logout",function(t){t.preventDefault(),n._api.Auth.logout(),n.onLogout()}),s(this,"handleLoginStatus",function(t){t.status===d.CONNECTED&&n.getUserWideData(t.session.mid,n.handleAccessGranted)}),s(this,"handleAccessGranted",function(t){n.userData=t.response[0],n.getFriends(n.userData.id)}),s(this,"handleAllFriendsLoad",function(t){n.onLogin(t.response),n.onUserData(n.userData,t.response.count)}),s(this,"handleFriendsLoad",function(t){n.onLogin(t.response)}),s(this,"handleSearchInput",function(t){t.target.value?n.getFriendsByQuery(t.target.value,n.handleFriendsLoad):n.getFriends(n.userData.id)}),s(this,"getLoginStatus",function(){n._api.Auth.getLoginStatus(n.handleLoginStatus)}),s(this,"getUserWideData",function(t,e){n._api.Api.call("users.get",a({},f.USER_DATA,{user_ids:t}),e)}),s(this,"getFriends",function(t){n._api.Api.call("friends.get",a({},f.FRIENDS_GET,{user_id:t}),n.handleAllFriendsLoad)}),s(this,"init",function(){n._api.init({apiId:c}),n.logoutButton&&n.logoutButton.addEventListener("click",n.logout),n.loginButton&&n.loginButton.addEventListener("click",n.login),n.searchField&&n.searchField.addEventListener("input",r()(n.handleSearchInput,l)),n.getLoginStatus()});var o=e.loginEl,i=e.logoutEl,u=e.searchInputEl,p=e.onLogout,g=e.onLogin,h=e.onUserData;this.userData={photo_200:"",first_name:"",last_name:""},this.loginButton=o,this.logoutButton=i,this.searchField=u,this.onLogout=p,this.onLogin=g,this.onUserData=h}var e,n,o;return e=t,(n=[{key:"handleLogin",value:function(t){t.status===d.CONNECTED?this.getUserWideData(t.session.mid,this.handleAccessGranted):t.status===d.UNKNOWN&&alert("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438")}},{key:"getFriendsByQuery",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this._api.Api.call("friends.search",a({},f.FRIENDS_SEARCH,{user_id:this.userData.id,q:t}),e)}}])&&u(e.prototype,n),o&&u(e,o),t}(),g="#login",h="#logout",m=".app__frame",_=".user-block__friends-list",v="#friends-search",y=".user-block__img img",b=".user-block__info h3",O="span.user-block__friends-count",D="js-logged",E=function(t){return'\n    <li>\n        <a href="https://vk.com/'.concat(t.domain,'" target="blank">\n            <img src="').concat(t.photo_50,'">\n        </a>\n        <p>\n            <a href="https://vk.com/').concat(t.domain,'" target="blank">').concat(t.first_name," ").concat(t.last_name,"</a>\n        </p>\n    </li>\n  ")};window.addEventListener("DOMContentLoaded",function(){var t=document.querySelector(g),e=document.querySelector(h),n=document.querySelector(m),o=document.querySelector(_),r=document.querySelector(y),i=document.querySelector(b),a=document.querySelector(O),u=document.querySelector(v);new p({loginEl:t,logoutEl:e,frameEl:n,searchInputEl:u,onLogout:function(){n.classList.remove(D)},onLogin:function(t){var e=t.items;n.classList.add(D),e.length?o.innerHTML=e.map(E).join(""):o.innerHTML="\u043d\u0438 \u043e\u0434\u043d\u043e\u0433\u043e \u0434\u0440\u0443\u0433\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"},onUserData:function(t,e){i.textContent="".concat(t.first_name," ").concat(t.last_name),r.alt="".concat(t.first_name," ").concat(t.last_name),r.src=t.photo_max,a.textContent=e}}).init()});n(2)}]);